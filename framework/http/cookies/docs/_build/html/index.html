<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>About cookies.py &mdash; cookies 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="cookies 1.0.0 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="#">cookies 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="about-cookies-py">
<h1>About cookies.py<a class="headerlink" href="#about-cookies-py" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="api-guide">
<h1>API Guide<a class="headerlink" href="#api-guide" title="Permalink to this headline">¶</a></h1>
<p>Okay, so this is supposed to be a very nice module for parsing, manipulating
and rendering HTTP cookie data. So how do you use this thing?</p>
<p>Two interfaces are exposed: a collection class named Cookies, and a class
named Cookie to represent each particular name, value and set of
attributes. If you want to, you can just ignore Cookie and just use Cookies
as a dictionary of objects with name and value attributes.</p>
<div class="section" id="cookie-objects">
<h2>Cookie objects<a class="headerlink" href="#cookie-objects" title="Permalink to this headline">¶</a></h2>
<p>Each individual Cookie object can be queried and manipulated as a normal Python
object with name and value attributes (and other attributes corresponding to
cookie attributes). Normally this is all you&#8217;ll need, but the following
describes most of the available facilities.</p>
<p>A Cookie object can be created explicitly.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cookies</span> <span class="kn">import</span> <span class="n">Cookie</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookie</span> <span class="o">=</span> <span class="n">Cookie</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookie</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;a&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookie</span><span class="o">.</span><span class="n">value</span>
<span class="go">&#39;b&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookie</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s">&#39;f&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookie</span><span class="o">.</span><span class="n">value</span>
<span class="go">&#39;f&#39;</span>
</pre></div>
</div>
<p>You can also explicitly create a Cookie object with
special attributes set in the constructor.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cookie</span> <span class="o">=</span> <span class="n">Cookie</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s">&quot;need to track a&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookie</span><span class="o">.</span><span class="n">comment</span>
<span class="go">&#39;need to track a&#39;</span>
</pre></div>
</div>
<p>You can also make a single Cookie by parsing a string:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cookie</span> <span class="o">=</span> <span class="n">Cookie</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s">&#39;Set-Cookie: x=y&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">cookie</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">cookie</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookie2</span> <span class="o">=</span> <span class="n">Cookie</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s">&#39;yak=mov&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">cookie2</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">cookie2</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="s">&#39;yak&#39;</span><span class="p">,</span> <span class="s">&#39;mov&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>But here there is an important caveat. Since Cookie.from_string only ever
returns a Cookie instance, you can&#8217;t use it to parse request headers which may
contain multiple name/value pairs (as in &#8216;Cookie: a=b; c=d&#8217;). It would be lame
if your program crashed or did something dumb depending on this sort of
difference, so use Cookies.from_request, to ensure you get consistent behavior
regardless of your input.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>  <span class="n">cookie3</span> <span class="o">=</span> <span class="n">Cookie</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s">&#39;Cookie: duh=frob&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="gp">... </span>  <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
<span class="go">&lt;class &#39;cookies.InvalidCookieError&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cookies</span> <span class="kn">import</span> <span class="n">Cookies</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span> <span class="o">=</span> <span class="n">Cookies</span><span class="o">.</span><span class="n">from_request</span><span class="p">(</span><span class="s">&#39;Cookie: duh=frob&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;duh&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&#39;frob&#39;</span>
<span class="go">True</span>
</pre></div>
</div>
<p>(See the next section for more on Cookies collection objects.)</p>
<p>You can also make a cookie object from a dict that maps attribute names to
values. This will parse the values as strings, which can be convenient when
you don&#8217;t have an existing string to parse.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookie</span> <span class="o">=</span> <span class="n">Cookie</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;expires&#39;</span><span class="p">:</span> <span class="s">&#39;Thu, 23 Jan 2003 00:00:00 GMT&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">cookie</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">cookie</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">cookie</span><span class="o">.</span><span class="n">expires</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2003</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookie</span> <span class="o">=</span> <span class="n">Cookie</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">cookie</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">cookie</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>You can also do the reverse operation with to_dict():</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cookie</span> <span class="o">=</span> <span class="n">Cookie</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s">&#39;no&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">cookie</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;Comment&#39;, &#39;no&#39;), (&#39;name&#39;, &#39;x&#39;), (&#39;value&#39;, &#39;y&#39;)]</span>
</pre></div>
</div>
<p>If you just want the attributes other than name and value, you can export those
to a dict with the attributes() method, which produces a mapping of attribute
names to encoded values and is also used internally for rendering:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cookie</span><span class="o">.</span><span class="n">attributes</span><span class="p">()</span>
<span class="go">{&#39;Comment&#39;: &#39;no&#39;}</span>
</pre></div>
</div>
<p>When you set cookie attributes, the library tries to make sure that it is
decoded appropriately during parse, has a usable kind of value in Python, and
is encoded appropriately during render. For example, the expires attribute
represents a date which might come in in any of many standard and non-standard
formats. From Python, it should be a datetime object. When rendering, it should
always be produced in the standard format.</p>
<p>The following example uses the parse_date function to create the datetime
(though that parsing can also be done indirectly by using from_dict or
from_string).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cookies</span> <span class="kn">import</span> <span class="n">parse_date</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Cookie</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;blah&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">expires</span> <span class="o">=</span> <span class="n">parse_date</span><span class="p">(</span><span class="s">&quot;Wed, 23-Jan-1992 00:01:02 GMT&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">render_response</span><span class="p">()</span>
<span class="go">&#39;a=blah; Expires=Thu, 23 Jan 1992 00:01:02 GMT&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># asctime format is also handled...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Cookie</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;blr&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">expires</span> <span class="o">=</span> <span class="n">parse_date</span><span class="p">(</span><span class="s">&quot;Sun Nov  6 08:49:37 1994&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">render_response</span><span class="p">()</span>
<span class="go">&#39;b=blr; Expires=Sun, 06 Nov 1994 08:49:37 GMT&#39;</span>
</pre></div>
</div>
<p>Cookie objects can be meaningfully compared; they are equal or unequal based on
their attributes. If one has an attribute the other is missing, they are not
equal.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">Cookie</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">Cookie</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">==</span> <span class="n">y</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="ow">is</span> <span class="n">y</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">Cookie</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">secure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="o">.</span><span class="n">secure</span> <span class="o">==</span> <span class="bp">True</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">secure</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">==</span> <span class="n">z</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">z</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span> <span class="n">x</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">z</span><span class="o">.</span><span class="n">value</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="cookies-objects">
<h2>Cookies objects<a class="headerlink" href="#cookies-objects" title="Permalink to this headline">¶</a></h2>
<p>Often you just want to parse a batch of cookies and start looking at them.</p>
<p>The following example shows a typical case: how a web app might handle the
value it gets in the HTTP_COOKIE CGI (or WSGI) variable. Since this is
a request header, use the from_request() method.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cookies</span> <span class="kn">import</span> <span class="n">Cookies</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span> <span class="o">=</span> <span class="n">Cookies</span><span class="o">.</span><span class="n">from_request</span><span class="p">(</span><span class="s">&quot;a=b; c=d; e=f&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting Cookies object can be used just like a dict of Cookie objects.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">cookies</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="go">[&#39;a&#39;, &#39;c&#39;, &#39;e&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">cookies</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>  <span class="n">cookies</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">]</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
<span class="gp">... </span>  <span class="k">print</span><span class="p">(</span><span class="s">&quot;didn&#39;t exist&quot;</span><span class="p">)</span>
<span class="go">didn&#39;t exist</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">cookies</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Each item in a Cookies object is a Cookie.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&lt;class &#39;cookies.Cookie&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">cookies</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span> <span class="n">cookies</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="s">&quot;deleted&quot;</span><span class="p">)</span>
<span class="go">deleted</span>
</pre></div>
</div>
<p>Calling cookies.parse_request() will add more cookies to the same object, so
you can build it up incrementally. However, it won&#8217;t overwrite existing cookies
with the same name, to ensure that only the first one is taken.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&#39;d&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">cookies</span><span class="o">.</span><span class="n">parse_request</span><span class="p">(</span><span class="s">&#39;x=y; c=mumbles&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&#39;y&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&#39;d&#39;</span>
<span class="go">True</span>
</pre></div>
</div>
<p>You can also use parse_response to add cookies from &#8216;Set-Cookie&#8217; response
headers in the same incremental way, with the same provisos. (This has to be
a different method, because response headers are different from request headers
and must be parsed differently.)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span> <span class="o">=</span> <span class="n">Cookies</span><span class="o">.</span><span class="n">from_response</span><span class="p">(</span><span class="s">&quot;Set-Cookie: z=b&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">cookies</span><span class="o">.</span><span class="n">parse_response</span><span class="p">(</span><span class="s">&quot;Set-Cookie: y=a&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;z&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&#39;b&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;y&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s">&#39;a&#39;</span>
<span class="go">True</span>
</pre></div>
</div>
<p>If you have some cookie objects that were already produced and should just be
added to a dict, or you just want to make some new ones quickly, either or both
can be done quickly with the add() method. Ordered arguments to the add()
method are interpreted as cookie objects, and added under their names. Keyword
arguments are interpreted as values for new cookies to be constructed with the
given name.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span> <span class="o">=</span> <span class="n">Cookies</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Cookie</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Cookie</span><span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="s">&#39;d&#39;</span><span class="p">),</span> <span class="n">e</span><span class="o">=</span><span class="s">&#39;f&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">cookies</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="go">[&#39;a&#39;, &#39;c&#39;, &#39;e&#39;, &#39;x&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">cookie</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">cookie</span> <span class="ow">in</span> <span class="n">cookies</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="go">[&#39;b&#39;, &#39;d&#39;, &#39;f&#39;, &#39;y&#39;]</span>
</pre></div>
</div>
<p>Other than parsing strings into Cookie objects, or modifying them, you might
also want to generate rendered output. For this, use render_request() or
render_response(), depending on the sort of headers you want to render.
You can render all the headers at once - either as separate lines, or all on
one line.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span> <span class="o">=</span> <span class="n">Cookies</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Cookie</span><span class="p">(</span><span class="s">&#39;mom&#39;</span><span class="p">,</span> <span class="s">&#39;strong&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Cookie</span><span class="p">(</span><span class="s">&#39;dad&#39;</span><span class="p">,</span> <span class="s">&#39;pretty&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="o">.</span><span class="n">render_request</span><span class="p">()</span>
<span class="go">&#39;dad=pretty; mom=strong&#39;</span>
</pre></div>
</div>
<p>Each individual cookie can be rendered either in the format for an HTTP
request, or the format for an HTTP response. Attribute values can be
manipulated in natural ways and the rendered output changes appropriately; but
rendered request headers don&#8217;t include attributes (as they shouldn&#8217;t):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span> <span class="o">=</span> <span class="n">Cookies</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">render_request</span><span class="p">()</span>
<span class="go">&#39;a=foo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max_age</span> <span class="o">=</span> <span class="mi">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">render_response</span><span class="p">()</span>
<span class="go">&#39;b=bar; Max-Age=42&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max_age</span> <span class="o">+=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">render_response</span><span class="p">()</span>
<span class="go">&#39;b=bar; Max-Age=52&#39;</span>

<span class="go"># Set attributes on individual cookies.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">expires</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2003</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="s">&#39;d&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">path</span>
<span class="go">&#39;/&#39;</span>

<span class="go"># Render request headers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cookies</span><span class="o">.</span><span class="n">render_request</span><span class="p">()</span>
<span class="go">&#39;a=foo; b=bar; c=d&#39;</span>

<span class="go"># Render response headers - more detail.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rendered</span> <span class="o">=</span> <span class="n">cookies</span><span class="o">.</span><span class="n">render_response</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rendered</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;a=foo; Expires=Thu, 23 Jan 2003 00:00:00 GMT&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rendered</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">&#39;b=bar; Max-Age=52&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rendered</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">&#39;c=d; Path=/&#39;</span>
</pre></div>
</div>
<p>Cookies objects can also be compared to each other: this is the same as
comparing all their individual cookies.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c1</span> <span class="o">=</span> <span class="n">Cookies</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;d&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c2</span> <span class="o">=</span> <span class="n">Cookies</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">&#39;d&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c3</span> <span class="o">=</span> <span class="n">Cookies</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c1</span> <span class="o">==</span> <span class="n">c2</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c2</span> <span class="o">==</span> <span class="n">c3</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<div class="section" id="extension-mechanisms">
<h2>Extension Mechanisms<a class="headerlink" href="#extension-mechanisms" title="Permalink to this headline">¶</a></h2>
<p>Many aspects of the Cookie class can be customized to get different behavior.
For example, new attributes can be supported or existing attributes can be
treated differently by changing the attribute_renderers, attribute_parsers, and
attribute_validators dicts. See the source for defaults and details.</p>
<p>In addition to the provided extension mechanisms, much of the functionality
is exposed in a lower-level imperative API which you can use to do things
imperatively or make your own object interfaces. Also, the regexps used in
the parser are exposed individually to help you with unusual tasks like
writing special tests or handling new attributes. Check out the source for
more information.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">About cookies.py</a></li>
<li><a class="reference internal" href="#api-guide">API Guide</a><ul>
<li><a class="reference internal" href="#cookie-objects">Cookie objects</a></li>
<li><a class="reference internal" href="#cookies-objects">Cookies objects</a></li>
<li><a class="reference internal" href="#extension-mechanisms">Extension Mechanisms</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="#">cookies 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Sasha Hart.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>